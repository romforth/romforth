# code.prims : mapping from the Forth primitives to x86 assembly userland code
#
# Copyright (c) 2023 Charles Suresh <romforth@proton.me>
# SPDX-License-Identifier: AGPL-3.0-only
# Please see the LICENSE file for the Affero GPL 3.0 license details

define next	jmp inner
define tos	%rax
define ip	%rsi

inner	: lodsb ; jmp *%rax
key	: nop ;
emit	: push tos ; push ip ; mov $102, %rdi ; call putchar ; pop ip ; pop tos ;
bye	: ret
