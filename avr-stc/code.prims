# code.prims : mapping from the Forth primitives to AVR assembly
#
# Copyright (c) 2026 Charles Suresh <romforth@proton.me>
# SPDX-License-Identifier: AGPL-3.0-only
# Please see the LICENSE file for the Affero GPL 3.0 license details

bye	: jmp halt
dup	: st Y+, TOSL ; st Y+, TOSH
drop	: ld TOSH, -Y ; ld TOSL, -Y
key	: dup ; lds TOSL, SIF ; eor TOSH, TOSH
emit	: sts SIF, TOSL ; drop
neg	: neg TOSH ; neg TOSL ; sbci TOSH, 0
inc	: adiw TOSL, 1
dec	: sbiw TOSL, 1
